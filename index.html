<!DOCTYPE html>
<html>
<head>
  <title>Bulk Mail Launcher</title>
  <style>
    body { font-family: Arial; background:#f4f4f9; padding:20px; }
    .box { background:white; padding:20px; border-radius:10px; max-width:600px; margin:auto; box-shadow:0 0 10px rgba(0,0,0,0.1); }
    input, textarea { width:100%; padding:10px; margin:10px 0; border-radius:5px; border:1px solid #ccc; }
    button { background:#28a745; color:white; padding:10px 20px; border:none; border-radius:5px; cursor:pointer; transition:0.3s; }
    button:hover { background:#218838; }
    button.sending { background:#ffc107; color:black; }
  </style>
</head>
<body>
  <div class="box">
    <h2>üöÄ Bulk Mail Launcher</h2>
    <label>Your Name:</label>
    <input type="text" id="name">

    <label>Your Gmail:</label>
    <input type="email" id="email">

    <label>Gmail App Password:</label>
    <input type="password" id="password">

    <label>Recipients (one per line):</label>
    <textarea id="recipients" rows="8" placeholder="email1@gmail.com
email2@gmail.com
email3@gmail.com"></textarea>

    <label>Subject:</label>
    <input type="text" id="subject">

    <label>Message:</label>
    <textarea id="message" rows="6"></textarea>

    <button id="sendBtn" onclick="sendEmails()">Send Emails</button>
  </div>

  <script>
    async function sendEmails() {
      const btn = document.getElementById("sendBtn");
      btn.innerText = "Sending...";
      btn.classList.add("sending");
      btn.disabled = true;

      const data = {
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        password: document.getElementById("password").value,
        recipients: document.getElementById("recipients").value,
        subject: document.getElementById("subject").value,
        message: document.getElementById("message").value,
      };

      try {
        const res = await fetch("http://localhost:5000/send-emails", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        const result = await res.json();

        if (result.success) {
          alert(`‚úÖ ${result.sent} Emails Sent Successfully!`);
        } else {
          alert(`‚ùå Failed to Send Emails: ${result.error}`);
        }
      } catch (err) {
        alert(`‚ùå Error: ${err.message}`);
      }

      // Reset button
      btn.innerText = "Send Emails";
      btn.classList.remove("sending");
      btn.disabled = false;
    }
  </script>
</body>
</html>
